---
title: 눈속임도 좋은 방법인 것 같다. feat.댓글, 토스트
date: '2021-04-07'
description: '4.3점, 댓글과 토스트를 만들면서 reply list, toast auto hide를 고민한 흔적'
---

# 댓글 눈속임

댓글 보여줄 때, 답글의 개수까지 보여줄 수 있다.
api에서 댓글의 정보를 보내줄 때, 답글의 개수까지 같이 보내주면 이를 처리하기 쉽다.
하지만 복잡한 부분은 해당 답글 목록에서 조작이 이루어 질 때다.

만약 답글의 조작이 이루어질 때, 대상 댓글도 업데이트 해주어야 한다고 해보자.
그러면 답글 목록을 수정할 때, 해당 답글 목록과 부모 답글의 싱크를 맞춰줘야 한다.
이는 비용이 생각보다 크다. 만약 모든 댓글에 대해서 이러한 동작이 이루어진다고 하면 정말로 다루기 어렵다. 

이러한 문제를 해결하기 위해, 답글 목록과 답글의 개수를 보여주는 ui를 합치는 방법을 떠올렸다. 

최초에는 댓글 데이터에 포함된 답글 개수를 보여준다. 만약 클릭되면 답글 목록을 보여주는 ui로 대체한다. 이때, 해당 ui 내부에 show, hide 상태가 있어 답글 개수를 실제 목록의 개수로 치환 가능하게 한다. 그러면 답글을 클릭했을 때만 호출이 일어나며, 거의 실시간으로 답글이 반영되는 상태를 생각할 수 있다.

# 토스트 눈속임
이번에 토스트를 만들게 되었다.
그냥 부트스트랩 쓸 때는 생각없이 만들었는데 직접 작업하니 좀 어렵다.

일단 setInterval로 gc의 역할을 수행하고, limit으로 보여줄 ui의 개수를 한정시키는 방식을 사용할 거다. visibility hidden이기 때문에 gc 전까지는 계속 돔에 쌓일 거다.

좀 별로인 것 같긴 하다.
일단 여쭤본 다음에, 해보고 생각하자. 더 좋은 방법이 뭘지는 모르겠으니 말이다.

---

\# 거의 뭐 멘탈이 나갔다.

\# 흑흑 나중에 만들 때는 편해지기...