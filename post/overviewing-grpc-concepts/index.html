<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[개발/RPC] 무에서 gRPC개념 쌓기 | Crispy bLog</title><meta name=keywords content="RPC,gRPC,protobuf"><meta name=description content="notice
뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.
반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!
update log
2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다. RPC가 뭐여 정의 Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것
어서 도냐 grpc가 http2를 쓴댜
→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여
→ 그럼 application 계층인건가
장점 IPC 등의 작업 없이 일단 실행시키는 것 가능 서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능 단점 보안 문제가 있을 수 있음 응답이 비동기임 proto buffer는 또 뭐여 정의 google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능"><meta name=author content="Crispy"><link rel=canonical href=https://heozeop.github.io/post/overviewing-grpc-concepts/><link crossorigin=anonymous href=/assets/css/stylesheet.d7fb4cbf980fe688a21621b06a795933c4e6bb2d4070ec940667af1715d84af2.css integrity="sha256-1/tMv5gP5oiiFiGwanlZM8Tmuy1AcOyUBmevFxXYSvI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://heozeop.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://heozeop.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://heozeop.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://heozeop.github.io/apple-touch-icon.png><link rel=mask-icon href=https://heozeop.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="[개발/RPC] 무에서 gRPC개념 쌓기"><meta property="og:description" content="notice
뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.
반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!
update log
2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다. RPC가 뭐여 정의 Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것
어서 도냐 grpc가 http2를 쓴댜
→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여
→ 그럼 application 계층인건가
장점 IPC 등의 작업 없이 일단 실행시키는 것 가능 서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능 단점 보안 문제가 있을 수 있음 응답이 비동기임 proto buffer는 또 뭐여 정의 google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능"><meta property="og:type" content="article"><meta property="og:url" content="https://heozeop.github.io/post/overviewing-grpc-concepts/"><meta property="og:image" content="https://heozeop.github.io/static/%ED%94%84%EB%A1%9C%ED%95%84%20%EC%9D%B4%EB%AF%B8%EC%A7%80.jpeg"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-16T16:13:21+09:00"><meta property="article:modified_time" content="2022-10-16T16:13:21+09:00"><meta property="og:site_name" content="Crispy bLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://heozeop.github.io/static/%ED%94%84%EB%A1%9C%ED%95%84%20%EC%9D%B4%EB%AF%B8%EC%A7%80.jpeg"><meta name=twitter:title content="[개발/RPC] 무에서 gRPC개념 쌓기"><meta name=twitter:description content="notice
뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.
반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!
update log
2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다. RPC가 뭐여 정의 Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것
어서 도냐 grpc가 http2를 쓴댜
→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여
→ 그럼 application 계층인건가
장점 IPC 등의 작업 없이 일단 실행시키는 것 가능 서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능 단점 보안 문제가 있을 수 있음 응답이 비동기임 proto buffer는 또 뭐여 정의 google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://heozeop.github.io/post/"},{"@type":"ListItem","position":2,"name":"[개발/RPC] 무에서 gRPC개념 쌓기","item":"https://heozeop.github.io/post/overviewing-grpc-concepts/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[개발/RPC] 무에서 gRPC개념 쌓기","name":"[개발\/RPC] 무에서 gRPC개념 쌓기","description":"notice\n뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.\n반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!\nupdate log\n2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다. RPC가 뭐여 정의 Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것\n어서 도냐 grpc가 http2를 쓴댜\n→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여\n→ 그럼 application 계층인건가\n장점 IPC 등의 작업 없이 일단 실행시키는 것 가능 서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능 단점 보안 문제가 있을 수 있음 응답이 비동기임 proto buffer는 또 뭐여 정의 google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능","keywords":["RPC","gRPC","protobuf"],"articleBody":" notice\n뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.\n반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!\nupdate log\n2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다. RPC가 뭐여 정의 Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것\n어서 도냐 grpc가 http2를 쓴댜\n→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여\n→ 그럼 application 계층인건가\n장점 IPC 등의 작업 없이 일단 실행시키는 것 가능 서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능 단점 보안 문제가 있을 수 있음 응답이 비동기임 proto buffer는 또 뭐여 정의 google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능\n다른거랑 뭐가 달라 Schema evolution in Avro, Protocol Buffers and Thrift\n1. Avro 1. schema를 version으로 관리하고, 딱 맞아야 함 2. 예전 pub/sub message 만들때, console에서 만드는 기본값으로 존재했었음 (물론 나중에 protobuf 추가됨) 3. 데이터에 주석을 포함한 모든 정보를 encoding 하므로, schema만 정의되면 모든 정보 가져올 수 있음 2. Thrift 1. RPC framework임 2. 2개의 JSON encoding, 3개의 byte encoding 방법을 지원함 1. byte encoding 중 한개(DenseProtocol)는 c++에서만 됨 3. 기본적으로는 proto buffer랑 표현방식은 같음 1. verbose 한게 기본값임 2. 끝에 00으로 끝나야됨 3. 짧게하면 짧아지긴 하는데, protobuf 보단 긴 경우가 있음 (많은지는 모르것음 ← 생각) IDL을 byte로 바꿀때 number taging을 한다. 첫 byte에 5개 bit를 number tag에, 뒤에 3개 bit를 type 으로 관리한다. type은 value의 타입을 말한다. 타입 앞에 repeated, optional, required가 있는데 protoBuf 3에서 required가 빠진 것 같기도 하다. type별로, 뒤에 이어질 길이를 1~2byte에 나타낸다. list타입은 별도로 존재하지 않아, 같은 tag로 여러개 쓰도록해서 list를 표현한다. proto 3 Language Guide (proto3)\n기본값이 진짜 그 값인지, 없는건지 구분할 수 없다. boolean으로 상태 표시할 때, 키고 끄는거 2개 써야할 듯\n타입 관련 주의 1. string이랑 bytes는 repeated랑 기본적으로 같은데, numerical value는 아님 1. repeated numerical value는 packed type으로 encoding 됨 2. reserved로 삭제시 tag 사용 방지 가능 1. 중복 안됨 2. 19000 - 19999는 FieldDescriptor로 예약됨. 3. enum 1. 0 존재해야 됨 1. 기본값 2. proto 2 호환 2. enum은 allow alias option이 true 면 중복 선언 가능 3. 언어 따라 compile value가 다르니 주의 4. any는 있고, byte로 컴파일 되는데 다는 안되어 있음 ← 사용시 주의 5. oneof 1. map이랑 repeated filed엔 적용 하믄 안됨 2. 나머지 다 clear한다는데, default 적용한다는 거 같음 6. map 1. key는 floating point, enum, byte 빼고 다됨 2. value는 map빼고 다됨 3. key로 정렬됨 4. repeated 안됨 7. package 1. namespace 같은거 8. json to proto buf 1. type by type으로 변환 추가 사항 optimizing 할때 보라고 한 encoding 방법 https://developers.google.com/protocol-buffers/docs/encoding style 가이드 https://developers.google.com/protocol-buffers/docs/style plugin 이 있지 않을까 ㅎㅎㅎㅎㅎㅎㅎㅎㅎㅎ gRPC 개념 통신 방법 unary client stream server stream bidirectional stream 실행 동기와 비동기 모두 지원 (언어마다 사용법 다름)\ndead line / timeout 통신시 설정 가능\n서로 끝나는게 다를 수 있음 server는 성공인데 client가 timeout 날 수 있음\n→ 4개의 use case가 통신마다 존재하는 것\nmetadata server와 client간에 보낼 message type sync를 맞추기 위한 key value 형식의 정보\nkey와 value는 string이 기본 타입으로, value는 binary 정보를 가질 수 있음\nkey 에 대한 제약 grpc-로 시작하면 안됨 binary의 정보의 경우, -bin으로 끝남 case sensitive 하지 않음 channel server에서 client 연결하라고 열어둔 port, 보통 100개인가 1000개라고 함 - 확인 필요\nproto buf와의 관계 gRPC가 기본 설정으로 protobuf를 씀 → json으로도 가능하긴 함\n인증 https://grpc.io/docs/guides/auth/\n지원하는 거 ssl/tls alts token ← google 일반적으로 1번이랑 같이 써야한다고 함 그럼에도 불구하고 굳이 썼다는건 이거 써보라는 거 같긴함 google 쓸때만 써야함 ← 도둑 맞으면 악용 될 수 있음 만약 따로 auth용 API를 쓴다면, custom header를 이용하거나 MetadataCredentialsPlugin을 쓰는 방법을 생각할 수 있다. 하지만 그렇게 했을때, user정보를 위해 기존 service를 계속 호출 해야하는 문제가 발생할 수 있다.\n에러 써봐야 알 것 같다.\n","wordCount":"594","inLanguage":"en","datePublished":"2022-10-16T16:13:21+09:00","dateModified":"2022-10-16T16:13:21+09:00","author":{"@type":"Person","name":"Crispy"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://heozeop.github.io/post/overviewing-grpc-concepts/"},"publisher":{"@type":"Organization","name":"Crispy bLog","logo":{"@type":"ImageObject","url":"https://heozeop.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://heozeop.github.io/ accesskey=h title="Crispy bLog (Alt + H)">Crispy bLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://heozeop.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://heozeop.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://heozeop.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://heozeop.github.io/post/>Posts</a></div><h1 class=post-title>[개발/RPC] 무에서 gRPC개념 쌓기</h1><div class=post-meta><span title='2022-10-16 16:13:21 +0900 KST'>October 16, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;594 words&nbsp;·&nbsp;Crispy&nbsp;|&nbsp;<a href=https://github.com/heozeop/I-want-to-know-why/content/post/overviewing-grpc-concepts.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><ul><li><p>notice</p><ol><li><p>뜬구름 잡는 소리를 할 수 있습니다. 댓글 주시면 반영할 수 있도록 하겠습니다.</p></li><li><p>반말과 충청도 사투리가 섞여 있습니다. 읽기 어려우신 부분 알려주세요!</p></li></ol></li><li><p>update log</p><ol><li>2022.10.17 - gRPC는 HTTP/2를 사용하므로, TCP에 기반합니다.</li></ol></li></ul><hr><h1 id=rpc가-뭐여>RPC가 뭐여<a hidden class=anchor aria-hidden=true href=#rpc가-뭐여>#</a></h1><h2 id=정의>정의<a hidden class=anchor aria-hidden=true href=#정의>#</a></h2><p>Remote Procedure Call의 약자로, 외부 procedure를 실행하는 것</p><h2 id=어서-도냐>어서 도냐<a hidden class=anchor aria-hidden=true href=#어서-도냐>#</a></h2><p>grpc가 http2를 쓴댜</p><p>→ TCP를 4계층으로 쓰고, 그 위에서 돌아가는 걸거여</p><p>→ 그럼 application 계층인건가</p><h2 id=장점>장점<a hidden class=anchor aria-hidden=true href=#장점>#</a></h2><ol><li>IPC 등의 작업 없이 일단 실행시키는 것 가능</li><li>서로 다른 언어에서 rpc 통신 방법만 맞추면, 통신 가능</li></ol><h2 id=단점>단점<a hidden class=anchor aria-hidden=true href=#단점>#</a></h2><ol><li>보안 문제가 있을 수 있음</li><li>응답이 비동기임</li></ol><h1 id=proto-buffer는-또-뭐여>proto buffer는 또 뭐여<a hidden class=anchor aria-hidden=true href=#proto-buffer는-또-뭐여>#</a></h1><h2 id=정의-1>정의<a hidden class=anchor aria-hidden=true href=#정의-1>#</a></h2><p>google에서 만든 rpc 통신 규약으로, 강력한 message의 정의를 통해서 일관된 데이터 구조로 소통 가능</p><h2 id=다른거랑-뭐가-달라>다른거랑 뭐가 달라<a hidden class=anchor aria-hidden=true href=#다른거랑-뭐가-달라>#</a></h2><blockquote><p><a href=https://martin.kleppmann.com/2012/12/05/schema-evolution-in-avro-protocol-buffers-thrift.html>Schema evolution in Avro, Protocol Buffers and Thrift</a></p></blockquote><h3 id=1-avro>1. Avro<a hidden class=anchor aria-hidden=true href=#1-avro>#</a></h3><pre><code>1. schema를 version으로 관리하고, 딱 맞아야 함
2. 예전 pub/sub message 만들때, console에서 만드는 기본값으로 존재했었음 (물론 나중에 protobuf 추가됨)
3. 데이터에 주석을 포함한 모든 정보를 encoding 하므로, schema만 정의되면 모든 정보 가져올 수 있음
</code></pre><h3 id=2-thrift>2. Thrift<a hidden class=anchor aria-hidden=true href=#2-thrift>#</a></h3><pre><code>1. RPC framework임
2. 2개의 JSON encoding, 3개의 byte encoding 방법을 지원함
    1. byte encoding 중 한개(DenseProtocol)는 c++에서만 됨
3. 기본적으로는 proto buffer랑 표현방식은 같음
    1. verbose 한게 기본값임
    2. 끝에 00으로 끝나야됨
    3. 짧게하면 짧아지긴 하는데, protobuf 보단 긴 경우가 있음 (많은지는 모르것음 ← 생각)
</code></pre><h2 id=idl을-byte로-바꿀때>IDL을 byte로 바꿀때<a hidden class=anchor aria-hidden=true href=#idl을-byte로-바꿀때>#</a></h2><ol><li>number taging을 한다.</li><li>첫 byte에 5개 bit를 number tag에, 뒤에 3개 bit를 type 으로 관리한다.<ol><li>type은 value의 타입을 말한다.</li><li>타입 앞에 repeated, optional, required가 있는데 protoBuf 3에서 required가 빠진 것 같기도 하다.</li></ol></li><li>type별로, 뒤에 이어질 길이를 1~2byte에 나타낸다.</li><li>list타입은 별도로 존재하지 않아, 같은 tag로 여러개 쓰도록해서 list를 표현한다.</li></ol><h2 id=proto-3>proto 3<a hidden class=anchor aria-hidden=true href=#proto-3>#</a></h2><blockquote><p><a href=https://developers.google.com/protocol-buffers/docs/proto3>Language Guide (proto3)</a></p></blockquote><h3 id=기본값이-진짜-그-값인지-없는건지-구분할-수-없다>기본값이 진짜 그 값인지, 없는건지 구분할 수 없다.<a hidden class=anchor aria-hidden=true href=#기본값이-진짜-그-값인지-없는건지-구분할-수-없다>#</a></h3><p>boolean으로 상태 표시할 때, 키고 끄는거 2개 써야할 듯</p><h3 id=타입-관련-주의>타입 관련 주의<a hidden class=anchor aria-hidden=true href=#타입-관련-주의>#</a></h3><pre><code>1. string이랑 bytes는 repeated랑 기본적으로 같은데, numerical value는 아님
    1. repeated numerical value는 packed type으로 encoding 됨
2. reserved로 삭제시 tag 사용 방지 가능
    1. 중복 안됨
    2. 19000 - 19999는 FieldDescriptor로 예약됨.
3. enum
    1.  0 존재해야 됨
        1. 기본값
        2. proto 2 호환
    2. enum은 allow alias option이 true 면 중복 선언 가능
    3. 언어 따라 compile value가 다르니 주의
4. any는 있고, byte로 컴파일 되는데 다는 안되어 있음 ← 사용시 주의
5. oneof
    1. map이랑 repeated filed엔 적용 하믄 안됨
    2. 나머지 다 clear한다는데, default 적용한다는 거 같음
6. map
    1. key는 floating point, enum, byte 빼고 다됨
    2. value는 map빼고 다됨
    3. key로 정렬됨
    4. repeated 안됨
7. package
    1. namespace 같은거
8. json to proto buf
    1. type by type으로 변환
</code></pre><h3 id=추가-사항>추가 사항<a hidden class=anchor aria-hidden=true href=#추가-사항>#</a></h3><ul><li>optimizing 할때 보라고 한 encoding 방법<ul><li><a href=https://developers.google.com/protocol-buffers/docs/encoding>https://developers.google.com/protocol-buffers/docs/encoding</a></li></ul></li><li>style 가이드<ul><li><a href=https://developers.google.com/protocol-buffers/docs/style>https://developers.google.com/protocol-buffers/docs/style</a></li><li>plugin 이 있지 않을까 ㅎㅎㅎㅎㅎㅎㅎㅎㅎㅎ</li></ul></li></ul><h2 id=grpc-개념>gRPC 개념<a hidden class=anchor aria-hidden=true href=#grpc-개념>#</a></h2><h3 id=통신-방법>통신 방법<a hidden class=anchor aria-hidden=true href=#통신-방법>#</a></h3><ol><li>unary</li><li>client stream</li><li>server stream</li><li>bidirectional stream</li></ol><h3 id=실행>실행<a hidden class=anchor aria-hidden=true href=#실행>#</a></h3><p>동기와 비동기 모두 지원 (언어마다 사용법 다름)</p><h3 id=dead-line--timeout>dead line / timeout<a hidden class=anchor aria-hidden=true href=#dead-line--timeout>#</a></h3><p>통신시 설정 가능</p><h3 id=서로-끝나는게-다를-수-있음>서로 끝나는게 다를 수 있음<a hidden class=anchor aria-hidden=true href=#서로-끝나는게-다를-수-있음>#</a></h3><p>server는 성공인데 client가 timeout 날 수 있음</p><p>→ 4개의 use case가 통신마다 존재하는 것</p><h3 id=metadata>metadata<a hidden class=anchor aria-hidden=true href=#metadata>#</a></h3><p>server와 client간에 보낼 message type sync를 맞추기 위한 key value 형식의 정보</p><p>key와 value는 string이 기본 타입으로, value는 binary 정보를 가질 수 있음</p><ul><li>key 에 대한 제약<ul><li>grpc-로 시작하면 안됨</li><li>binary의 정보의 경우, -bin으로 끝남</li><li>case sensitive 하지 않음</li></ul></li></ul><h3 id=channel>channel<a hidden class=anchor aria-hidden=true href=#channel>#</a></h3><p>server에서 client 연결하라고 열어둔 port, 보통 100개인가 1000개라고 함 - 확인 필요</p><h3 id=proto-buf와의-관계>proto buf와의 관계<a hidden class=anchor aria-hidden=true href=#proto-buf와의-관계>#</a></h3><p>gRPC가 기본 설정으로 protobuf를 씀 → json으로도 가능하긴 함</p><h2 id=인증>인증<a hidden class=anchor aria-hidden=true href=#인증>#</a></h2><blockquote><p><a href=https://grpc.io/docs/guides/auth/>https://grpc.io/docs/guides/auth/</a></p></blockquote><h3 id=지원하는-거>지원하는 거<a hidden class=anchor aria-hidden=true href=#지원하는-거>#</a></h3><ol><li>ssl/tls</li><li>alts</li><li>token ← google<ol><li>일반적으로 1번이랑 같이 써야한다고 함<ol><li>그럼에도 불구하고 굳이 썼다는건 이거 써보라는 거 같긴함</li></ol></li><li>google 쓸때만 써야함 ← 도둑 맞으면 악용 될 수 있음</li></ol></li></ol><h3 id=만약-따로-auth용-api를-쓴다면>만약 따로 auth용 API를 쓴다면,<a hidden class=anchor aria-hidden=true href=#만약-따로-auth용-api를-쓴다면>#</a></h3><p>custom header를 이용하거나 MetadataCredentialsPlugin을 쓰는 방법을 생각할 수 있다. 하지만 그렇게 했을때, user정보를 위해 기존 service를 계속 호출 해야하는 문제가 발생할 수 있다.</p><h2 id=에러>에러<a hidden class=anchor aria-hidden=true href=#에러>#</a></h2><p>써봐야 알 것 같다.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://heozeop.github.io/tags/rpc/>RPC</a></li><li><a href=https://heozeop.github.io/tags/grpc/>gRPC</a></li><li><a href=https://heozeop.github.io/tags/protobuf/>protobuf</a></li></ul><nav class=paginav><a class=prev href=https://heozeop.github.io/post/typescript-type-assignment/><span class=title>« Prev</span><br><span>의식적으로 쓰기 - 선언과 단언</span></a>
<a class=next href=https://heozeop.github.io/post/role-of-operating-system/><span class=title>Next »</span><br><span>[OS] 운영체제란?</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on twitter" href="https://twitter.com/intent/tweet/?text=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0&url=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f&hashtags=RPC%2cgRPC%2cprotobuf"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f&title=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0&summary=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0&source=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f&title=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on whatsapp" href="https://api.whatsapp.com/send?text=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0%20-%20https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share [개발/RPC] 무에서 gRPC개념 쌓기 on telegram" href="https://telegram.me/share/url?text=%5b%ea%b0%9c%eb%b0%9c%2fRPC%5d%20%eb%ac%b4%ec%97%90%ec%84%9c%20gRPC%ea%b0%9c%eb%85%90%20%ec%8c%93%ea%b8%b0&url=https%3a%2f%2fheozeop.github.io%2fpost%2foverviewing-grpc-concepts%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=heozeop/heozeop.github.io issue-term=title label=Comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=https://heozeop.github.io/>Crispy bLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>